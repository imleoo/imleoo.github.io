<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒç†å¥åº·é—®é¢˜å„¿ç«¥å®¶é•¿å…¨ç”Ÿå‘½å‘¨æœŸæ”¯æŒåˆ†ææŠ¥å‘Š</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Font Support */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #fcfcfc;
            color: #333;
        }

        /* Chart Container Rules - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 300px;
            max-height: 400px;
            margin: 0 auto;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom Scrollbar for side panels */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Interactive Timeline Styles */
        .timeline-node {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .timeline-node.active {
            transform: scale(1.1);
            font-weight: 700;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-hover {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
    </style>
    <!-- Chosen Palette: Warm Support (Stone-50 background, Slate-800 text, Teal-600 accents, Amber-500 highlights) -->
    <!-- Application Structure Plan: The app is designed as a 'Lifecycle Journey Dashboard'. 
         1. Top Navigation: A linear timeline represents the child's growth stages. This is the primary controller.
         2. Dynamic Content Area: Updates based on the timeline selection. It's split into 'Qualitative Reality' (Text) and 'Quantitative Impact' (Charts).
         3. Action Modules: Interactive checklists and strategy cards that provide actionable advice for the specific stage.
         4. Why this structure? Parenting a child with mental health issues is a temporal journey with distinct phases. A timeline-based structure allows parents to locate their current reality or anticipate future needs, reducing anxiety through structured information. -->
    <!-- Visualization & Content Choices:
         1. Line Chart (Stress Trajectory): Goals: Inform & Compare. Shows how parental stress evolves vs. child's stability. Justification: Validates parents' feelings that stress fluctuates rather than disappears. Library: Chart.js.
         2. Radar Chart (Burden Analysis): Goal: Relationships. Shows the multidimensional impact (Financial, Social, Emotional, Physical) per stage. Justification: Helps parents identify which area needs more support resources. Library: Chart.js.
         3. Dynamic Cards: Goal: Organize. Breaks down complex tasks into 'Medical', 'School', and 'Home' categories. Method: HTML/JS Injection. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-stone-50 text-slate-800 selection:bg-teal-100 selection:text-teal-900">

    <!-- Header Section -->
    <header class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-teal-600 rounded-lg flex items-center justify-center text-white font-bold text-lg">
                    <span>Î¨</span>
                </div>
                <h1 class="text-xl font-bold text-slate-800 tracking-tight">å¿ƒç†å¥åº·å®¶åº­æ”¯æŒç³»ç»Ÿ <span class="text-sm font-normal text-slate-500 hidden sm:inline">| å…¨ç”Ÿå‘½å‘¨æœŸåˆ†ææŠ¥å‘Š</span></h1>
            </div>
            <div class="text-sm text-stone-500">
                <span id="current-stage-display" class="font-semibold text-teal-700 bg-teal-50 px-3 py-1 rounded-full">å½“å‰é˜¶æ®µï¼šé¢„è­¦ä¸å‘ç—…æœŸ</span>
            </div>
        </div>
    </header>

    <!-- Main Content Container -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8">

        <!-- Introduction Context -->
        <section class="max-w-4xl mx-auto text-center space-y-4 mb-10">
            <h2 class="text-3xl font-bold text-slate-900">å®¶åº­ç…§æŠ¤è€…çš„å…¨ç”Ÿå‘½å‘¨æœŸæ—…ç¨‹</h2>
            <p class="text-lg text-slate-600 leading-relaxed">
                æœ¬äº¤äº’å¼æŠ¥å‘Šæ—¨åœ¨è§£æå¿ƒç†å¥åº·é—®é¢˜å„¿ç«¥å®¶é•¿åœ¨ä¸åŒé˜¶æ®µé¢ä¸´çš„ç‹¬ç‰¹æŒ‘æˆ˜ã€‚
                é€šè¿‡ç‚¹å‡»ä¸‹æ–¹çš„æ—¶é—´è½´ï¼Œæ‚¨å¯ä»¥æ¢ç´¢ä»<b>æ—©æœŸé¢„è­¦</b>åˆ°<b>æˆå¹´å®‰ç½®</b>çš„å®Œæ•´è·¯å¾„ï¼Œè·å–é’ˆå¯¹æ€§çš„å¿ƒç†æ”¯æŒã€èµ„æºé…ç½®å»ºè®®åŠå‹åŠ›ç®¡ç†ç­–ç•¥ã€‚
            </p>
        </section>

        <!-- Interactive Lifecycle Timeline -->
        <nav aria-label="Lifecycle Timeline" class="w-full overflow-x-auto pb-4 custom-scroll">
            <div class="min-w-[800px] flex justify-between items-center relative px-10" id="timeline-container">
                <!-- Connecting Line -->
                <div class="absolute top-1/2 left-0 w-full h-1 bg-stone-200 -z-10 transform -translate-y-1/2"></div>
                
                <!-- Stages generated by JS -->
            </div>
        </nav>

        <!-- Dynamic Dashboard Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- LEFT COLUMN: Qualitative Analysis (Content) -->
            <div class="lg:col-span-7 space-y-6">
                
                <!-- Stage Header -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-stone-100 fade-in" id="stage-header-card">
                    <div class="flex justify-between items-start mb-4">
                        <h2 class="text-2xl font-bold text-teal-800" id="stage-title">é˜¶æ®µåŠ è½½ä¸­...</h2>
                        <span class="px-3 py-1 bg-amber-100 text-amber-800 rounded text-sm font-medium" id="stage-duration">æ—¶é•¿</span>
                    </div>
                    <p class="text-slate-600 mb-6 leading-relaxed" id="stage-description">
                        æè¿°å†…å®¹...
                    </p>
                    
                    <!-- Core Role Tag -->
                    <div class="bg-slate-50 rounded-lg p-4 border-l-4 border-teal-500">
                        <h4 class="text-sm font-bold text-slate-500 uppercase tracking-wider mb-1">å®¶é•¿çš„æ ¸å¿ƒè§’è‰²</h4>
                        <p class="text-lg font-medium text-slate-800" id="parent-role">è§’è‰²å®šä¹‰</p>
                    </div>
                </div>

                <!-- Actionable Tasks Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Emotional Tasks -->
                    <div class="bg-white rounded-xl p-5 shadow-sm border border-stone-100 card-hover fade-in">
                        <div class="flex items-center gap-2 mb-3 text-rose-600">
                            <span class="text-xl">â¤ï¸</span>
                            <h3 class="font-bold">æƒ…æ„ŸæŒ‘æˆ˜</h3>
                        </div>
                        <ul class="space-y-3 text-sm text-slate-600" id="emotional-list">
                            <!-- Items via JS -->
                        </ul>
                    </div>
                    
                    <!-- Practical Tasks -->
                    <div class="bg-white rounded-xl p-5 shadow-sm border border-stone-100 card-hover fade-in">
                        <div class="flex items-center gap-2 mb-3 text-blue-600">
                            <span class="text-xl">ğŸ“‹</span>
                            <h3 class="font-bold">å…³é”®ä»»åŠ¡</h3>
                        </div>
                        <ul class="space-y-3 text-sm text-slate-600" id="practical-list">
                            <!-- Items via JS -->
                        </ul>
                    </div>
                </div>

                <!-- Strategy Section -->
                <div class="bg-teal-50 rounded-xl p-6 border border-teal-100 fade-in">
                    <h3 class="text-lg font-bold text-teal-900 mb-3">ğŸ›¡ï¸ åº”å¯¹ç­–ç•¥å»ºè®®</h3>
                    <p class="text-teal-800 text-sm mb-4">åŸºäºå½“å‰é˜¶æ®µçš„ä¸“å®¶å»ºè®®ï¼š</p>
                    <div id="strategy-content" class="text-teal-900 space-y-2 text-sm leading-relaxed">
                        <!-- Strategy via JS -->
                    </div>
                </div>

            </div>

            <!-- RIGHT COLUMN: Quantitative Analysis (Charts) -->
            <div class="lg:col-span-5 space-y-6">
                
                <!-- Chart 1: Stress vs Functioning -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-stone-100">
                    <div class="mb-4">
                        <h3 class="font-bold text-slate-800 text-lg">å®¶åº­å‹åŠ›ä¸åº·å¤è½¨è¿¹</h3>
                        <p class="text-xs text-slate-500 mt-1">å±•ç¤ºå®¶é•¿å‹åŠ›æ°´å¹³ä¸å­©å­ç¤¾ä¼šåŠŸèƒ½çš„å…¸å‹æ¼”å˜å…³ç³»</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="trajectoryChart"></canvas>
                    </div>
                    <div class="mt-4 p-3 bg-stone-50 rounded text-xs text-slate-500 text-center">
                        <span class="inline-block w-2 h-2 rounded-full bg-rose-400 mr-1"></span> å®¶é•¿å‹åŠ›æŒ‡æ•°
                        <span class="inline-block w-2 h-2 rounded-full bg-teal-400 ml-3 mr-1"></span> å­©å­ç¤¾ä¼šåŠŸèƒ½
                    </div>
                </div>

                <!-- Chart 2: Burden Distribution -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-stone-100">
                    <div class="mb-4">
                        <h3 class="font-bold text-slate-800 text-lg">ç…§æŠ¤è´Ÿæ‹…ç»´åº¦åˆ†æ</h3>
                        <p class="text-xs text-slate-500 mt-1">å½“å‰é˜¶æ®µå®¶åº­èµ„æºçš„ä¸»è¦æ¶ˆè€—æ–¹å‘</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="burdenChart"></canvas>
                    </div>
                    <div class="mt-4 text-center">
                        <p id="burden-insight" class="text-sm font-medium text-slate-700 italic">"åœ¨æ­¤é˜¶æ®µï¼ŒåŒ»ç–—æ”¯å‡ºé€šå¸¸æ˜¯ä¸»è¦å‹åŠ›æºã€‚"</p>
                    </div>
                </div>

            </div>
        </div>

        <!-- Comparative Table Section -->
        <section class="mt-12 bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden">
            <div class="p-6 bg-slate-50 border-b border-stone-200">
                <h3 class="text-lg font-bold text-slate-800">å…¨å‘¨æœŸå…³é”®æŒ‡æ ‡å¯¹æ¯”</h3>
                <p class="text-sm text-slate-500">å¿«é€Ÿæ¦‚è§ˆå„é˜¶æ®µçš„é‡ç‚¹å·®å¼‚</p>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left text-slate-600">
                    <thead class="text-xs text-slate-700 uppercase bg-slate-50 border-b border-stone-200">
                        <tr>
                            <th scope="col" class="px-6 py-4 font-bold">ç»´åº¦</th>
                            <th scope="col" class="px-6 py-4">é¢„è­¦æœŸ</th>
                            <th scope="col" class="px-6 py-4">è¯Šæ–­ä¸æ€¥æ€§æœŸ</th>
                            <th scope="col" class="px-6 py-4">ç¨³å®šä¸åº·å¤æœŸ</th>
                            <th scope="col" class="px-6 py-4">é•¿æœŸç®¡ç†æœŸ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="bg-white border-b hover:bg-slate-50">
                            <th scope="row" class="px-6 py-4 font-bold text-slate-900 whitespace-nowrap">ä¸»è¦æƒ…ç»ª</th>
                            <td class="px-6 py-4">å›°æƒ‘ã€å¦è®¤</td>
                            <td class="px-6 py-4 text-rose-600 font-medium">ææƒ§ã€å´©æºƒ</td>
                            <td class="px-6 py-4">ç–²æƒ«ã€è°¨æ…ä¹è§‚</td>
                            <td class="px-6 py-4 text-teal-600">æ¥çº³ã€å¹³é™</td>
                        </tr>
                        <tr class="bg-white border-b hover:bg-slate-50">
                            <th scope="row" class="px-6 py-4 font-bold text-slate-900 whitespace-nowrap">åŒ»ç–—é‡ç‚¹</th>
                            <td class="px-6 py-4">è¯†åˆ«ç—‡çŠ¶</td>
                            <td class="px-6 py-4">æ§åˆ¶å±æ€¥ç—‡çŠ¶</td>
                            <td class="px-6 py-4">ç»´æŒæ²»ç–—ä¾ä»æ€§</td>
                            <td class="px-6 py-4">é¢„é˜²å¤å‘</td>
                        </tr>
                        <tr class="bg-white border-b hover:bg-slate-50">
                            <th scope="row" class="px-6 py-4 font-bold text-slate-900 whitespace-nowrap">ç»æµå½±å“</th>
                            <td class="px-6 py-4">ä½</td>
                            <td class="px-6 py-4 text-amber-600 font-medium">æé«˜ï¼ˆæ€¥æ•‘/ä½é™¢ï¼‰</td>
                            <td class="px-6 py-4">ä¸­é«˜ï¼ˆæŒç»­å’¨è¯¢ï¼‰</td>
                            <td class="px-6 py-4">ä¸­ç­‰ï¼ˆç»´æŒæ€§è¯ç‰©ï¼‰</td>
                        </tr>
                        <tr class="bg-white hover:bg-slate-50">
                            <th scope="row" class="px-6 py-4 font-bold text-slate-900 whitespace-nowrap">ç¤¾ä¼šåŠŸèƒ½</th>
                            <td class="px-6 py-4">å¼€å§‹ä¸‹é™</td>
                            <td class="px-6 py-4">ä¸­æ–­ï¼ˆä¼‘å­¦/éš”ç¦»ï¼‰</td>
                            <td class="px-6 py-4">å°è¯•æ¢å¤/é€‚åº”</td>
                            <td class="px-6 py-4">é‡å»ºæ–°å¸¸æ€</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-2">æœ¬åˆ†ææŠ¥å‘ŠåŸºäºä¸€èˆ¬æ€§å¿ƒç†å¥åº·å‘å±•è§„å¾‹ç”Ÿæˆï¼Œä»…ä¾›å‚è€ƒã€‚</p>
            <p class="text-sm text-slate-500">æ¯ä¸ªå­©å­çš„æˆé•¿è½¨è¿¹éƒ½æ˜¯ç‹¬ç‰¹çš„ï¼Œè¯·åŠ¡å¿…å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿè·å–ä¸ªæ€§åŒ–å»ºè®®ã€‚</p>
        </div>
    </footer>

    <script>
        // --- DATA STORE ---
        // Represents the "Source Report" content organized by lifecycle stage
        const lifecycleData = [
            {
                id: 0,
                title: "1. é¢„è­¦ä¸å‘ç—…æœŸ",
                duration: "æŒç»­æ—¶é—´ä¸å®š",
                role: "è§‚å¯Ÿè€… (Observer) & æ¢ç´¢è€…",
                description: "è¿™æ˜¯å®¶é•¿æœ€å®¹æ˜“æ„Ÿåˆ°å›°æƒ‘çš„é˜¶æ®µã€‚å­©å­å¼€å§‹è¡¨ç°å‡ºè¡Œä¸ºå¼‚å¸¸ï¼ˆå¦‚æˆç»©éª¤é™ã€ç¡çœ æ”¹å˜ã€ç¤¾äº¤é€€ç¼©ï¼‰ï¼Œä½†å°šæœªç¡®è¯Šã€‚å®¶é•¿å¸¸åœ¨'é’æ˜¥æœŸå›é€†'ä¸'å¿ƒç†ç–¾ç—…'çš„åˆ¤æ–­é—´æ‘‡æ‘†ã€‚",
                emotionalTasks: [
                    "å…‹æœ'ç—…è€»æ„Ÿ'ä¸å¦è®¤å¿ƒç†",
                    "å¤„ç†é¢å¯¹æœªçŸ¥çš„ä¸ç¡®å®šæ„Ÿä¸ç„¦è™‘",
                    "é¿å…å› å­©å­è¡Œä¸ºé—®é¢˜äº§ç”Ÿçš„å®¶åº­å†…éƒ¨å†²çª"
                ],
                practicalTasks: [
                    "è¯¦ç»†è®°å½•å­©å­çš„è¡Œä¸ºã€ç¡çœ åŠé¥®é£Ÿå˜åŒ–æ—¥å¿—",
                    "ä¸å­¦æ ¡è€å¸ˆæ²Ÿé€šï¼Œäº†è§£å­©å­åœ¨æ ¡è¡¨ç°",
                    "é¢„çº¦ä¸“ä¸šç²¾ç¥ç§‘åŒ»ç”Ÿè¿›è¡Œé¦–æ¬¡è¯„ä¼°"
                ],
                strategy: "æ­¤é˜¶æ®µæœ€é‡è¦çš„æ˜¯**ä¸è¦æ€¥äºå½’å› **ï¼ˆå¦‚æŒ‡è´£å­©å­æ‡’æƒ°ï¼‰ã€‚ä¿æŒå¼€æ”¾æ²Ÿé€šï¼Œè¡¨è¾¾å…³å¿ƒè€Œéè¯„åˆ¤ã€‚å°½æ—©å¯»æ±‚ä¸“ä¸šè¯„ä¼°æ˜¯é˜²æ­¢ç—…æƒ…æ¶åŒ–çš„å…³é”®ã€‚",
                // Data for charts
                stressLevel: 60,
                childFunction: 80,
                burden: [20, 30, 70, 40] // [Financial, Physical, Emotional, Social]
            },
            {
                id: 1,
                title: "2. è¯Šæ–­ä¸æ€¥æ€§çˆ†å‘æœŸ",
                duration: "1-6 ä¸ªæœˆ",
                role: "å±æœºç®¡ç†è€… (Crisis Manager)",
                description: "ç¡®è¯Šå¦‚åŒæ™´å¤©éœ¹é›³ï¼Œé€šå¸¸ä¼´éšç€è‡ªä¼¤ã€æåº¦æƒ…ç»ªæ³¢åŠ¨ç­‰å±æœºäº‹ä»¶ã€‚è¿™æ˜¯å®¶åº­å‹åŠ›æœ€å¤§çš„æ—¶æœŸï¼Œç”Ÿæ´»é‡å¿ƒå®Œå…¨å‘åŒ»ç–—å€¾æ–œã€‚",
                emotionalTasks: [
                    "æ¥å—è¯Šæ–­ç»“æœï¼Œå“€æ‚¼'å®Œç¾å­©å­'çš„æœŸå¾…",
                    "åº”å¯¹æåº¦çš„ææƒ§ã€å†…ç–šä¸æ— åŠ©æ„Ÿ",
                    "åœ¨å±æœºä¸­ä¿æŒå†·é™ï¼Œæˆä¸ºå­©å­çš„å®‰å…¨é”šç‚¹"
                ],
                practicalTasks: [
                    "å¤„ç†ç´§æ€¥ä½é™¢æˆ–é«˜å¼ºåº¦è¯ç‰©æ²»ç–—äº‹å®œ",
                    "å‘å­¦æ ¡ç”³è¯·ä¼‘å­¦æˆ–ç‰¹æ®Šæ”¯æŒ",
                    "å»ºç«‹å®¶åº­å®‰å…¨è®¡åˆ’ï¼ˆç§»é™¤å±é™©ç‰©å“ï¼‰"
                ],
                strategy: "**ç”Ÿå­˜æ¨¡å¼**å¼€å¯ã€‚æ­¤æ—¶ä¸è¦è€ƒè™‘é•¿è¿œçš„å­¦ä¸šæˆ–æœªæ¥ï¼Œé¦–è¦ä»»åŠ¡æ˜¯**ç”Ÿå‘½å®‰å…¨**ã€‚å®¶é•¿éœ€è¦è½®æ›¿ä¼‘æ¯ï¼Œé¿å…ä¸€äººå´©æºƒå¯¼è‡´å®¶åº­ç³»ç»Ÿç˜«ç—ªã€‚",
                stressLevel: 95,
                childFunction: 20,
                burden: [90, 80, 100, 90]
            },
            {
                id: 2,
                title: "3. æ²»ç–—ä¸ç¨³å®šæœŸ",
                duration: "6 ä¸ªæœˆ - 2 å¹´",
                role: "ç…§æŠ¤è€… (Caregiver) & ç£ä¿ƒè€…",
                description: "ç—…æƒ…é€æ¸å—æ§ï¼Œè¿›å…¥æ¼«é•¿çš„æ²»ç–—æ‹‰é”¯æˆ˜ã€‚è¯ç‰©å‰¯ä½œç”¨æ˜¾ç°ï¼Œå­©å­å¯èƒ½æŠ—æ‹’æ²»ç–—ã€‚å®¶é•¿éœ€è¦å»ºç«‹æ–°çš„å®¶åº­å¸¸è§„ã€‚",
                emotionalTasks: [
                    "ç®¡ç†å¯¹æ²»ç–—èµ·æ•ˆç¼“æ…¢çš„å¤±æœ›æ„Ÿ",
                    "é€‚åº”'ç—…äººç…§æŠ¤è€…'çš„æ–°èº«ä»½",
                    "é‡å»ºå—æŸçš„äº²å­ä¿¡ä»»å…³ç³»"
                ],
                practicalTasks: [
                    "ç›‘ç£æœè¯ä¾ä»æ€§ï¼Œè®°å½•å‰¯ä½œç”¨",
                    "é™ªåŒå®šæœŸå¿ƒç†å’¨è¯¢ä¸å¤è¯Š",
                    "è°ƒæ•´å®¶åº­ç¯å¢ƒï¼Œé™ä½é«˜æƒ…ç»ªè¡¨è¾¾ï¼ˆHigh EEï¼‰"
                ],
                strategy: "é‡ç‚¹ä»'æ•‘ç«'è½¬å‘**å»ºç«‹è§„å¾‹**ã€‚è€å¿ƒæ˜¯æ­¤é˜¶æ®µçš„æ ¸å¿ƒèµ„æºã€‚å­¦ä¹ ä¸“ä¸šçš„æ²Ÿé€šæŠ€å·§ï¼ˆå¦‚éæš´åŠ›æ²Ÿé€šï¼‰æ¥å‡å°‘å®¶åº­æ‘©æ“¦ã€‚",
                stressLevel: 75,
                childFunction: 50,
                burden: [70, 60, 80, 60]
            },
            {
                id: 3,
                title: "4. åº·å¤ä¸ç¤¾ä¼šå¤å½’æœŸ",
                duration: "2 - 5 å¹´",
                role: "æ•™ç»ƒ (Coach) & å€¡å¯¼è€…",
                description: "ç—‡çŠ¶æ˜æ˜¾æ”¹å–„ï¼Œå°è¯•å¤å­¦æˆ–å·¥ä½œã€‚é¢ä¸´çš„æœ€å¤§æŒ‘æˆ˜æ˜¯ç¤¾ä¼šé€‚åº”ä¸ç—…è€»æ„Ÿã€‚å®¶é•¿éœ€ä»'å…¨é¢åŒ…åŠ'è½¬å‘'è¾…åŠ©ç‹¬ç«‹'ã€‚",
                emotionalTasks: [
                    "å…‹æœå¯¹å¤å‘çš„è¿‡åº¦æ‹…å¿§ï¼ˆ'ç›´å‡æœºçˆ¶æ¯'å€¾å‘ï¼‰",
                    "é¼“åŠ±å­©å­é¢å¯¹ç¤¾äº¤æŒ«æŠ˜",
                    "å…³æ³¨å®¶é•¿è‡ªèº«çš„ä¸ªäººç”Ÿæ´»å›å½’"
                ],
                practicalTasks: [
                    "ååŠ©åˆ¶å®šå¤å­¦/å¤å·¥çš„æ¸è¿›è®¡åˆ’",
                    "ä¸å­¦æ ¡/é›‡ä¸»æ²Ÿé€šåˆç†çš„ä¾¿åˆ©æªæ–½",
                    "åŸ¹å…»å­©å­çš„ç¤¾äº¤æŠ€èƒ½ä¸å‹åŠ›åº”å¯¹æŠ€å·§"
                ],
                strategy: "**é€‚åº¦æ”¾æ‰‹**ã€‚å…è®¸å­©å­åœ¨å®‰å…¨èŒƒå›´å†…çŠ¯é”™ã€‚æ”¯æŒç³»ç»Ÿéœ€æ‰©å±•åˆ°åŒ»ç–—ä¹‹å¤–ï¼ŒåŒ…æ‹¬å­¦æ ¡è€å¸ˆã€èŒä¸šè¾…å¯¼å‘˜ç­‰ã€‚",
                stressLevel: 50,
                childFunction: 70,
                burden: [50, 40, 60, 70]
            },
            {
                id: 4,
                title: "5. é•¿æœŸç®¡ç†ä¸æˆå¹´æœŸ",
                duration: "ç»ˆèº«",
                role: "ä¼™ä¼´ (Partner) & é¡¾é—®",
                description: "ç–¾ç—…æˆä¸ºç”Ÿæ´»çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–æ˜¯å®Œå…¨åº·å¤ã€‚é‡ç‚¹åœ¨äºæˆå¹´åçš„ç‹¬ç«‹ç”Ÿæ´»ã€æ³•å¾‹ç›‘æŠ¤åŠé•¿æœŸè´¢åŠ¡è§„åˆ’ã€‚",
                emotionalTasks: [
                    "æ¥å—'æ…¢æ€§ç—…ç®¡ç†'çš„å¸¸æ€",
                    "å¤„ç†'å½“æˆ‘è€äº†è°æ¥ç…§é¡¾ä»–'çš„ç»ˆæç„¦è™‘",
                    "å°Šé‡æˆå¹´å­å¥³çš„è‡ªä¸»æƒ"
                ],
                practicalTasks: [
                    "å»ºç«‹ä¿¡æ‰˜æˆ–é•¿æœŸè´¢åŠ¡ä¿éšœæœºåˆ¶",
                    "å®Œæˆå‘æˆäººåŒ»ç–—ä½“ç³»çš„è½¬ä»‹",
                    "åˆ¶å®šå®¶é•¿çš„å…»è€ä¸é€€å‡ºè®¡åˆ’"
                ],
                strategy: "é‡ç‚¹æ˜¯**èµ‹èƒ½**ä¸**ä¿éšœ**ã€‚ç¡®ä¿å­©å­æ‹¥æœ‰ç‹¬ç«‹çš„ç¤¾ä¼šæ”¯æŒç½‘ç»œï¼Œä¸å†å®Œå…¨ä¾èµ–çˆ¶æ¯ã€‚æ³•å¾‹å’Œè´¢åŠ¡è§„åˆ’æ¯”æ—¥å¸¸ç…§æŠ¤æ›´é‡è¦ã€‚",
                stressLevel: 40,
                childFunction: 85,
                burden: [40, 20, 40, 30]
            }
        ];

        // --- STATE MANAGEMENT ---
        let currentStageIndex = 0;
        let trajectoryChartInstance = null;
        let burdenChartInstance = null;

        // --- DOM ELEMENTS ---
        const timelineContainer = document.getElementById('timeline-container');
        const stageTitle = document.getElementById('stage-title');
        const stageDuration = document.getElementById('stage-duration');
        const stageDescription = document.getElementById('stage-description');
        const parentRole = document.getElementById('parent-role');
        const emotionalList = document.getElementById('emotional-list');
        const practicalList = document.getElementById('practical-list');
        const strategyContent = document.getElementById('strategy-content');
        const currentStageDisplay = document.getElementById('current-stage-display');
        const burdenInsight = document.getElementById('burden-insight');
        const stageHeaderCard = document.getElementById('stage-header-card');

        // --- INITIALIZATION ---
        function initApp() {
            renderTimeline();
            initCharts();
            updateContent(0);
        }

        // --- TIMELINE RENDERER ---
        function renderTimeline() {
            lifecycleData.forEach((stage, index) => {
                const node = document.createElement('div');
                node.className = `timeline-node flex flex-col items-center gap-2 z-10 group w-32`;
                node.onclick = () => updateContent(index);

                // Circle Indicator
                const circle = document.createElement('div');
                circle.className = `w-10 h-10 rounded-full border-4 flex items-center justify-center bg-white transition-colors duration-300 ${index === 0 ? 'border-teal-500 text-teal-600' : 'border-stone-300 text-stone-400'}`;
                circle.innerHTML = `<span class="font-bold text-sm">${index + 1}</span>`;
                circle.id = `timeline-circle-${index}`;

                // Label
                const label = document.createElement('span');
                label.className = `text-xs font-medium text-center transition-colors duration-300 ${index === 0 ? 'text-teal-800' : 'text-stone-500'}`;
                label.innerText = stage.title.split(' ')[1]; // Extract short name
                label.id = `timeline-label-${index}`;

                node.appendChild(circle);
                node.appendChild(label);
                timelineContainer.appendChild(node);
            });
        }

        // --- CORE LOGIC: UPDATE CONTENT ---
        function updateContent(index) {
            currentStageIndex = index;
            const data = lifecycleData[index];

            // 1. Update UI Styles for Timeline
            lifecycleData.forEach((_, i) => {
                const circle = document.getElementById(`timeline-circle-${i}`);
                const label = document.getElementById(`timeline-label-${i}`);
                const node = circle.parentElement;

                if (i === index) {
                    circle.className = "w-12 h-12 rounded-full border-4 border-teal-500 bg-teal-50 text-teal-700 flex items-center justify-center shadow-lg transform scale-110";
                    label.className = "text-sm font-bold text-teal-800 mt-2";
                    node.classList.add('active');
                } else if (i < index) {
                    // Past stages
                    circle.className = "w-10 h-10 rounded-full border-4 border-teal-200 bg-teal-50 text-teal-300 flex items-center justify-center";
                    label.className = "text-xs font-medium text-teal-300/80";
                    node.classList.remove('active');
                } else {
                    // Future stages
                    circle.className = "w-10 h-10 rounded-full border-4 border-stone-200 bg-white text-stone-300 flex items-center justify-center group-hover:border-stone-300";
                    label.className = "text-xs font-medium text-stone-400 group-hover:text-stone-500";
                    node.classList.remove('active');
                }
            });

            // 2. Update Text Content with Animation Reset
            animateElement(stageHeaderCard);
            
            stageTitle.innerText = data.title;
            stageDuration.innerText = data.duration;
            stageDescription.innerText = data.description;
            parentRole.innerText = data.role;
            currentStageDisplay.innerText = `å½“å‰é˜¶æ®µï¼š${data.title.split(' ')[1]}`;

            // Lists
            emotionalList.innerHTML = data.emotionalTasks.map(item => `<li class="flex items-start"><span class="mr-2 mt-1 text-rose-400 text-[10px]">â—</span>${item}</li>`).join('');
            practicalList.innerHTML = data.practicalTasks.map(item => `<li class="flex items-start"><span class="mr-2 mt-1 text-blue-400 text-[10px]">â—</span>${item}</li>`).join('');
            strategyContent.innerHTML = data.strategy;

            // 3. Update Charts
            updateCharts(index);
        }

        function animateElement(element) {
            element.classList.remove('fade-in');
            void element.offsetWidth; // trigger reflow
            element.classList.add('fade-in');
        }

        // --- CHART LOGIC ---
        function initCharts() {
            // Chart 1: Trajectory (Line Chart)
            const ctx1 = document.getElementById('trajectoryChart').getContext('2d');
            
            // Prepare full dataset for background context
            const allStress = lifecycleData.map(d => d.stressLevel);
            const allFunc = lifecycleData.map(d => d.childFunction);
            const labels = lifecycleData.map(d => d.title.split(' ')[1]);

            trajectoryChartInstance = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'å®¶é•¿å‹åŠ›æŒ‡æ•°',
                            data: allStress,
                            borderColor: 'rgb(251, 113, 133)', // Rose-400
                            backgroundColor: 'rgba(251, 113, 133, 0.1)',
                            borderWidth: 3,
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6,
                            fill: true
                        },
                        {
                            label: 'å­©å­ç¤¾ä¼šåŠŸèƒ½',
                            data: allFunc,
                            borderColor: 'rgb(45, 212, 191)', // Teal-400
                            backgroundColor: 'rgba(45, 212, 191, 0.05)',
                            borderWidth: 3,
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(255, 255, 255, 0.9)',
                            titleColor: '#1e293b',
                            bodyColor: '#475569',
                            borderColor: '#e2e8f0',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: { borderDash: [2, 4], color: '#f1f5f9' },
                            ticks: { display: false } // Abstract scale
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });

            // Chart 2: Burden (Radar Chart)
            const ctx2 = document.getElementById('burdenChart').getContext('2d');
            burdenChartInstance = new Chart(ctx2, {
                type: 'radar',
                data: {
                    labels: ['ç»æµè´Ÿæ‹…', 'èº«ä½“æŸè€—', 'æƒ…ç»ªå‹åŠ›', 'ç¤¾äº¤éš”ç¦»'],
                    datasets: [{
                        label: 'å½“å‰é˜¶æ®µè´Ÿæ‹…åˆ†å¸ƒ',
                        data: lifecycleData[0].burden,
                        fill: true,
                        backgroundColor: 'rgba(94, 234, 212, 0.3)', // Teal-300
                        borderColor: 'rgb(20, 184, 166)', // Teal-500
                        pointBackgroundColor: 'rgb(13, 148, 136)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(13, 148, 136)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#e2e8f0' },
                            grid: { color: '#f1f5f9' },
                            pointLabels: {
                                font: { size: 12, family: "'Noto Sans SC', sans-serif", weight: 'bold' },
                                color: '#475569'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: { display: false, stepSize: 25 }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        function updateCharts(index) {
            // Update Trajectory Chart Highlight
            // We highlight the current point by making others smaller or changing opacity
            // For simplicity in this demo, we just rely on the x-axis label or let the user see the whole curve.
            // A visual indicator line could be added using Chartjs plugins, but here we will just update the title context.

            // Update Burden Chart Data
            const newData = lifecycleData[index].burden;
            burdenChartInstance.data.datasets[0].data = newData;
            
            // Generate Insight Text based on max value
            const burdens = ['ç»æµè´Ÿæ‹…', 'èº«ä½“æŸè€—', 'æƒ…ç»ªå‹åŠ›', 'ç¤¾äº¤éš”ç¦»'];
            const maxVal = Math.max(...newData);
            const maxIndex = newData.indexOf(maxVal);
            
            let insightText = "";
            if(index === 1) {
                 insightText = "âš ï¸ çº¢è‰²è­¦æŠ¥ï¼šç”±äºå±æœºå¤„ç†ï¼Œæƒ…ç»ªå‹åŠ›ä¸ç»æµæ”¯å‡ºåŒæ—¶è¾¾åˆ°å³°å€¼ã€‚";
            } else if (index === 4) {
                 insightText = "âœ… å‹åŠ›é€æ¸å¹³ç¨³ï¼Œä½†éœ€è­¦æƒ•é•¿æœŸçš„ç…§æŠ¤ç–²åŠ³ä¸è‡ªèº«è¡°è€é—®é¢˜ã€‚";
            } else {
                 insightText = `ğŸ“Š å½“å‰æ•°æ®æ˜¾ç¤ºï¼Œ${burdens[maxIndex]}æ˜¯æ­¤é˜¶æ®µæœ€æ˜¾è‘—çš„æŒ‘æˆ˜ã€‚`;
            }
            
            burdenInsight.innerText = insightText;

            burdenChartInstance.update();
        }

        // Start
        window.addEventListener('load', initApp);

    </script>
</body>
</html>